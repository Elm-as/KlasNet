import{j as e,o as m,d as p,g,f as j}from"./index-JJeUicGD.js";function N({eleve:s,echeances:o,totalDue:h,classe:d,anneeScolaire:x}){return e.jsxs("div",{className:"p-6 print:page-break-after-always",children:[e.jsxs("div",{className:"flex justify-end mb-4 space-x-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm",onClick:()=>{const t=document.getElementById("convocation-print-area");t&&(t.classList.contains("print-five-per-page")&&t.classList.remove("print-five-per-page"),m("convocation-print-area",`convocation_${s.matricule||"unknown"}`))},children:"Exporter PDF"}),e.jsx("button",{className:"px-3 py-1 bg-gray-700 text-white rounded-md text-sm",onClick:()=>{const t=document.getElementById("convocation-print-area");t&&(t.classList.add("print-four-per-page"),m("convocation-print-area",`convocation_${s.matricule||"unknown"}_4up`),setTimeout(()=>t.classList.remove("print-four-per-page"),500))},children:"Exporter (4/pg)"})]}),e.jsxs("div",{id:"convocation-print-area",className:"mx-auto bg-white text-black p-6 shadow-lg border border-gray-200 max-w-[800px] convocation",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:(()=>{const t=p.getAll("ecole")[0],a=g("recu"),r=t?.logo||a?.logo||"",l=t?.nom||a?.header||"Votre École";return e.jsxs(e.Fragment,{children:[r?e.jsx("img",{src:r,alt:"Logo",className:"w-20 h-20 object-contain rounded-md"}):e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-md flex items-center justify-center text-sm font-semibold text-gray-600",children:"Logo"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"École"}),e.jsx("div",{className:"text-xl font-bold",children:l}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Année scolaire ",x||""]})]})]})})()}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("div",{className:"font-medium",children:"Convocation de paiement"}),e.jsxs("div",{className:"text-gray-500",children:["Imprimé le ",new Date().toLocaleDateString("fr-FR")]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Élève"}),e.jsx("div",{className:"font-semibold text-lg",children:j(s)}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Matricule : ",s.matricule||"-"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Tél parent : ",s.pereTuteur||s.telephone||s.mereTutrice||"-"]})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"text-xs text-gray-500",children:"Classe"}),e.jsx("div",{className:"font-semibold",children:d?`${d.niveau} ${d.section||""}`:"-"}),e.jsxs("div",{className:"mt-2",children:["Année : ",e.jsx("span",{className:"font-medium",children:x||"-"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3 text-base",children:"Modalités impayées"}),e.jsx("div",{className:"overflow-hidden border rounded-md",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-4 py-3",children:"Modalité"}),e.jsx("th",{className:"text-left px-4 py-3",children:"Période"}),e.jsx("th",{className:"text-right px-4 py-3",children:"Attendu"}),e.jsx("th",{className:"text-right px-4 py-3",children:"Payé"}),e.jsx("th",{className:"text-right px-4 py-3",children:"Reste"})]})}),e.jsx("tbody",{children:o.map((t,a)=>e.jsxs("tr",{className:a%2===0?"bg-white":"bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:t.modalite}),e.jsx("td",{className:"px-4 py-3",children:t.date||"-"}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[(t.attendu||0).toLocaleString("fr-FR")," FCFA"]}),e.jsxs("td",{className:"px-4 py-3 text-right text-green-700",children:[(t.paye||0).toLocaleString("fr-FR")," FCFA"]}),e.jsxs("td",{className:"px-4 py-3 text-right text-red-700 font-medium",children:[(t.reste||0).toLocaleString("fr-FR")," FCFA"]})]},t.modalite))})]})})]}),e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-700 print-important",children:[e.jsx("strong",{className:"text-red-800 text-base",children:"IMPORTANT :"}),e.jsx("div",{className:"mt-1 font-semibold text-red-700",children:"Veuillez régler le montant dû dans les plus brefs délais — sans régularisation, l'élève risque de ne pas être accepté dans l'école."})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Montant total dû"}),e.jsxs("div",{className:"text-2xl font-bold text-red-700",children:[h.toLocaleString("fr-FR")," FCFA"]})]})]}),e.jsx("div",{className:"mt-4 text-sm text-right text-gray-600",children:(()=>{try{const t=new Date,a=new Date(t.getFullYear(),t.getMonth(),t.getDate()),r=12,l=o.filter(n=>{if(!n.date)return!1;const i=new Date(n.date),c=Math.ceil((i.getTime()-a.getTime())/(1e3*60*60*24));return c>0&&c<=r}).sort((n,i)=>new Date(n.date).getTime()-new Date(i.date).getTime());if(l.length>0){const i=new Date(l[0].date).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"}),c=i.charAt(0).toUpperCase()+i.slice(1);return e.jsxs("div",{className:"print-deadline",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Date limite de paiement :"}),e.jsx("div",{className:"font-bold text-red-800",children:c})]})}else return e.jsxs("div",{className:"print-deadline",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Date limite de paiement :"}),e.jsx("div",{className:"font-bold text-red-800",children:"Dès que possible"})]})}catch{return null}})()}),e.jsx("div",{className:"mt-8 text-sm",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Signature responsable"}),e.jsx("div",{className:"mt-6 border-t w-48"})]}),e.jsx("div",{className:"text-right text-xs text-gray-500",children:"Pour toute information : contactez l'administration"})]})})]})]})}export{N as default};
